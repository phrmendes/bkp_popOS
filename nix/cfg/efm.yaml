---
version: 2
root-markers:
  - .git/

tools:
  alejandra: &alejandra
    format-command: "alejandra --quiet"
    format-stdin: true
  json-prettier: &json-prettier
    format-command: "prettier --parser json"
  yaml-prettier: &yaml-prettier
    format-command: "prettier --parser yaml"
  markdown-prettier: &markdown-prettier
    format-command: "prettier --parser markdown"
  ruff: &ruff
    format-command: "ruff --fix -e -n --stdin-filename ${INPUT} -"
    format-stdin: true
  shfmt: &shfmt
    format-command: "shfmt -ci -s -bn"
    format-stdin: true
  scala-scalafmt: &scala-scalafmt
    format-command: "scalafmt --stdin"
    format-stdin: true
  lua-lua-format: &lua-lua-format
    format-command: "lua-format -i"
    format-stdin: true
  toml-taplo: &toml-taplo
    format-command: "taplo format -"
    format-stdin: true
  shellcheck: &shellcheck
    lint-command: "shellcheck -f gcc -x"
    lint-source: "shellcheck"
    lint-formats:
      - "%f:%l:%c: %trror: %m"
      - "%f:%l:%c: %tarning: %m"
      - "%f:%l:%c: %tote: %m"
  yamllint: &yamllint
    lint-command: "yamllint -f parsable -"
    lint-stdin: true
  jsonlint: &jsonlint
    lint-command: "jsonlint --compact"
    lint-stdin: true
  statix: &statix
    lint-command: "statix check --stdin --format=errfmt"
    lint-stdin: true

languages:
  json:
    - <<: *json-prettier
    - <<: *jsonlint
  lua:
    - <<: *lua-lua-format
  markdown:
    - <<: *markdown-prettier
  nix:
    - <<: *alejandra
    - <<: *statix
  python:
    - <<: *ruff
  sh:
    - <<: *shellcheck
    - <<: *shfmt
  yaml:
    - <<: *yaml-prettier
    - <<: *yamllint
  toml:
    - <<: *toml-taplo
  scala:
    - <<: *scala-scalafmt
